# Для тестирования
https://t.me/example_psychologist_bot

# Psychologist_bot, бот определяющий психоэмоциональное состояние клиента, и пытающиеся его улучшить по средству общения с клиентом

# В боте реализовано
- БД на postgreSQL, сохраняющая диалог, результаты анкетирования и результат опроса
- Вызов специалистов службы поддержки
- Общения с ботом
- Оценка эмоционального окраса сообщений при общении, с целью создания экстренных вызовов специалиста (отключено для удобства тестирования)
- Опрос и анкетирование

# Psychologist_bot, описание бота и его работы
> *Psychologist_bot, бот определяющий психо-эмоциональное состояние клиента, и пытающиеся его улучшить по средству общения с клиентом.*

**От лица клиента:**

Когда клиент запускает бота, начинается опрос из различных вопросов с вариантами ответа. После бот оценивает психоэмоциональное состояние и сообщает результат клиенту. В конце идёт анкета, где просят оценить своё эмоциональное состояние от 1 до 10. Далее клиенту предлагают начать диалог, и после согласия, начинается процесс общения с ботом. После того как клиент закончит диалог, будет повторно вызвана анкета, и после, бот выведет результат своей работы (стало ли хуже, лучше или ничего не изменилось). 

Обратиться в службу поддержки можно на любом этапе взаимодействия с ботом. После обращения, когда свободный специалист его примет, клиент будет общаться со специалистом службы поддержки через бота. Также, если бот выявит плохой эмоциональный окрас сообщения во время общения клиента с ботом, то специалист будет вызван автоматически.

**От лица специалиста службы поддержки:**

Когда специалист запускает бота, ему отправляется сообщение об ожидании вызова. Когда вызов появляется, специалисту приходит уведомление.

![изображение](https://user-images.githubusercontent.com/104253966/177153699-8a2bb95e-e027-4cca-b027-230b3af94266.png)

Если специалист откликается на уведомление, начинается процесс общения специалиста и клиента.

# Техническая составляющая

Проект написан по всем принципам ООП (в коде используются различные паттерны) и высоко стандартизирован.

**Реализация различных составляющих:**
- БД - postgreSQL, psycopg2
- Бот в телеграм - aiogram
- Общение - dialogflow
- Оценка эмоционального окраса - dostoevsky

# Описание файлов

Корневая папка:

- main - главный файл

- db - файл для управления БД

- config - файл с важными константами 

- psylogbot - json файл для библиотеки Dialogflow

classes:

- person_manager - управляет различными видами пользователей

- mode_switch - позволяет переключать и управлять режимами

classes.persons:

- person - стандартный класс, от него наследуются все остальные персоны

- user - обычный пользователь

- assistant - ассистент 

classes.modes:

- basic - стандартный класс, от него наследуются все остальные режимы

- broadcast - режим отправки всех сообщений другому пользователю (нужен для связи с поддержкой)

- dialogue - режим разговора с ботом

- interview - психологический тест/вопросы

- last_question - вопрос "как вы себя чувствуете"

- waiting_help - ожидание помощи юзером

- waiting_request - если специалист службы поддержки еще не соединен с кем-либо

**Буду рад ответить на любые ваши вопросы**
